{"version":3,"file":"nowzoo-ngx-highlight-js.js.map","sources":["ng://@nowzoo/ngx-highlight-js/lib/ngx-highlight-js-options.ts","ng://@nowzoo/ngx-highlight-js/lib/ngx-highlight-js-theme.service.ts","ng://@nowzoo/ngx-highlight-js/lib/ngx-highlight-js-script.service.ts","ng://@nowzoo/ngx-highlight-js/lib/ngx-highlight-js.service.ts","ng://@nowzoo/ngx-highlight-js/lib/ngx-highlight-js.component.ts","ng://@nowzoo/ngx-highlight-js/lib/ngx-highlight-js.module.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\nexport const NGX_HIGHLIGHT_JS_URL = new InjectionToken<string>('The base url for highlight.js');\nexport const NGX_HIGHLIGHT_JS_DEFAULT_THEME = new InjectionToken<string>('The default theme for highlight.js');\n","import { Injectable, Inject } from '@angular/core';\nimport { Sheetload } from '@nowzoo/sheetload';\nimport {\n  NGX_HIGHLIGHT_JS_DEFAULT_THEME,\n  NGX_HIGHLIGHT_JS_URL\n} from './ngx-highlight-js-options';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxHighlightJsThemeService {\n  _theme = 'default';\n  _initializedPromise: Promise<void> = null;\n  _linkEl: HTMLLinkElement = null;\n  constructor(\n    @Inject(NGX_HIGHLIGHT_JS_DEFAULT_THEME) private _defaultTheme: string,\n    @Inject(NGX_HIGHLIGHT_JS_URL) private _jsURL: string\n  ) {\n    this._theme = _defaultTheme;\n  }\n\n  initialized(): Promise<void> {\n    if (! this._initializedPromise) {\n      this._initializedPromise = this.loadTheme(this._theme);\n    }\n    return this._initializedPromise;\n  }\n\n  loadTheme(name: string): Promise<void> {\n    const url = `${this._jsURL}/styles/${name}.min.css`;\n    return Sheetload.load(url)\n      .then((linkEl: HTMLLinkElement) => {\n        if (this._linkEl) {\n          this._linkEl.remove();\n        }\n        this._linkEl = linkEl;\n        this._linkEl.removeAttribute('disabled');\n      });\n  }\n\n  get theme(): string {\n    return this._theme;\n  }\n\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { Scriptload } from '@nowzoo/sheetload';\n\nimport {\n  NGX_HIGHLIGHT_JS_URL\n} from './ngx-highlight-js-options';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxHighlightJsScriptService {\n  _loadedLanguages: Map<string, Promise<any>>;\n  _hljs: any = null;\n  _loadedPromise: Promise<any>;\n  constructor(\n    @Inject(NGX_HIGHLIGHT_JS_URL) private _jsURL: string\n  ) {\n    this._loadedLanguages = new Map();\n  }\n\n  loaded(): Promise<any> {\n    if (this._loadedPromise) {\n      return this._loadedPromise;\n    }\n    this._loadedPromise = new Promise((resolve, reject) => {\n      const url = `${this._jsURL}/highlight.min.js`;\n      Scriptload.load(url)\n        .then(() => {\n          setTimeout(() => {\n            this._hljs = window['hljs'];\n            resolve(this._hljs);\n          }, 10);\n        })\n        .catch(reject);\n    });\n    return this._loadedPromise;\n  }\n\n  loadLanguage(lang: string): Promise<void> {\n    let p = this._loadedLanguages.get(lang);\n    if (p) {\n      return p;\n    }\n    if (this._hljs && this._hljs.listLanguages().indexOf(lang) > -1) {\n      p = Promise.resolve();\n      this._loadedLanguages.set(lang, p);\n      return p;\n    }\n    const url = `${this._jsURL}/languages/${lang}.min.js`;\n    p = this.loaded()\n      .then(() => {\n        return Scriptload.load(url);\n      });\n    this._loadedLanguages.set(lang, p);\n    return p;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { NgxHighlightJsThemeService } from './ngx-highlight-js-theme.service';\nimport { NgxHighlightJsScriptService } from './ngx-highlight-js-script.service';\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxHighlightJsService {\n  private _hljs: any;\n  private _loadedPromise: Promise<any>;\n\n\n  get theme(): string {\n    return this.themeService._theme;\n  }\n  constructor(\n    private themeService: NgxHighlightJsThemeService,\n    private scriptService: NgxHighlightJsScriptService\n  ) { }\n\n  loaded(): Promise<any> {\n    if (this._loadedPromise) {\n      return this._loadedPromise;\n    }\n    const promises = [this.scriptService.loaded(), this.themeService.initialized()];\n    this._loadedPromise = Promise.all(promises)\n      .then((results) => {\n        this._hljs = results[0];\n        return (this._hljs);\n      });\n    return this._loadedPromise;\n  }\n\n  loadLanguage(lang: string): Promise<void> {\n    return this.scriptService.loadLanguage(lang);\n  }\n\n  loadTheme(name: string): Promise<void> {\n    return this.themeService.loadTheme(name);\n  }\n\n  highlight(lang: string, code: string): Promise<string> {\n    return this.loaded()\n      .then(() => {\n        return this.loadLanguage(lang);\n      })\n      .then(() => {\n        const hl = this._hljs.highlight(lang, code, true).value;\n        return hl;\n      });\n  }\n\n}\n","import { Component, OnInit, OnChanges, Input, SimpleChanges } from '@angular/core';\nimport { NgxHighlightJsService } from './ngx-highlight-js.service';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'ngx-highlight-js',\n  exportAs: `ngxHighlightJs`,\n  template: `<pre><code\n      [ngClass]=\"'hljs ' + lang\"\n      [innerHTML]=\"highlightedHTML\"></code></pre>`,\n})\nexport class NgxHighlightJsComponent implements OnInit, OnChanges {\n\n  @Input() code: string;\n  @Input() url: string;\n  @Input() lang: string;\n\n  highlightedHTML = '';\n  error: string = null;\n  isInitializing: boolean;\n\n  private afterInit = false;\n\n  constructor(\n    private service: NgxHighlightJsService,\n    private http: HttpClient,\n  ) { }\n\n  ngOnInit() {\n    this.onChange();\n    this.afterInit = true;\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (this.afterInit) {\n      this.onChange();\n    }\n  }\n\n\n  fetchText(): Promise<string> {\n    if (! this.url) {\n      return Promise.resolve(this.code || '');\n    }\n    return new Promise((resolve, reject) => {\n      this.http.get(this.url, {responseType: 'text'}).subscribe(\n        (text) => resolve(text), (err) => reject(err)\n      );\n    });\n\n  }\n\n  onChange() {\n    this.error = null;\n    this.isInitializing = true;\n    this.fetchText()\n      .then((text: string) => {\n        return this.service.highlight(this.lang, text);\n      })\n      .then((hl) => {\n        this.highlightedHTML = hl;\n        this.isInitializing = false;\n      })\n      .catch(e => {\n        this.error = e.toString();\n        this.isInitializing = false;\n      });\n  }\n}\n","import { NgModule, ModuleWithProviders, InjectionToken } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgxHighlightJsThemeService } from './ngx-highlight-js-theme.service';\nimport { NgxHighlightJsScriptService } from './ngx-highlight-js-script.service';\nimport { NgxHighlightJsService } from './ngx-highlight-js.service';\nimport {\n  NGX_HIGHLIGHT_JS_DEFAULT_THEME,\n  NGX_HIGHLIGHT_JS_URL\n} from './ngx-highlight-js-options';\nimport { NgxHighlightJsComponent } from './ngx-highlight-js.component';\n\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule\n  ],\n  declarations: [NgxHighlightJsComponent],\n  exports: [NgxHighlightJsComponent],\n})\nexport class NgxHighlightJsModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: NgxHighlightJsModule,\n      providers: [\n        NgxHighlightJsThemeService,\n        NgxHighlightJsScriptService,\n        NgxHighlightJsService,\n        {provide: NGX_HIGHLIGHT_JS_URL, useValue: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0'},\n        {provide: NGX_HIGHLIGHT_JS_DEFAULT_THEME, useValue: 'default'},\n      ]\n    };\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;AAAA,uBACa,oBAAoB,GAAG,IAAI,cAAc,CAAS,+BAA+B,CAAC,CAAC;AAChG,uBAAa,8BAA8B,GAAG,IAAI,cAAc,CAAS,oCAAoC,CAAC;;;;;;ACF9G;;;;;IAcE,YACkD,aAAqB,EAC/B,MAAc;QADJ,kBAAa,GAAb,aAAa,CAAQ;QAC/B,WAAM,GAAN,MAAM,CAAQ;sBAL7C,SAAS;mCACmB,IAAI;uBACd,IAAI;QAK7B,IAAI,CAAC,MAAM,GAAG,aAAa,CAAC;KAC7B;;;;IAED,WAAW;QACT,IAAI,CAAE,IAAI,CAAC,mBAAmB,EAAE;YAC9B,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SACxD;QACD,OAAO,IAAI,CAAC,mBAAmB,CAAC;KACjC;;;;;IAED,SAAS,CAAC,IAAY;QACpB,uBAAM,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,WAAW,IAAI,UAAU,CAAC;QACpD,OAAO,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC;aACvB,IAAI,CAAC,CAAC,MAAuB;YAC5B,IAAI,IAAI,CAAC,OAAO,EAAE;gBAChB,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;aACvB;YACD,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;YACtB,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;SAC1C,CAAC,CAAC;KACN;;;;IAED,IAAI,KAAK;QACP,OAAO,IAAI,CAAC,MAAM,CAAC;KACpB;;;YAnCF,UAAU,SAAC;gBACV,UAAU,EAAE,MAAM;aACnB;;;;yCAMI,MAAM,SAAC,8BAA8B;yCACrC,MAAM,SAAC,oBAAoB;;;;;;;;AChBhC;;;;IAcE,YACwC,MAAc;QAAd,WAAM,GAAN,MAAM,CAAQ;qBAHzC,IAAI;QAKf,IAAI,CAAC,gBAAgB,GAAG,IAAI,GAAG,EAAE,CAAC;KACnC;;;;IAED,MAAM;QACJ,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,OAAO,IAAI,CAAC,cAAc,CAAC;SAC5B;QACD,IAAI,CAAC,cAAc,GAAG,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM;YAChD,uBAAM,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,mBAAmB,CAAC;YAC9C,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC;iBACjB,IAAI,CAAC;gBACJ,UAAU,CAAC;oBACT,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;oBAC5B,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;iBACrB,EAAE,EAAE,CAAC,CAAC;aACR,CAAC;iBACD,KAAK,CAAC,MAAM,CAAC,CAAC;SAClB,CAAC,CAAC;QACH,OAAO,IAAI,CAAC,cAAc,CAAC;KAC5B;;;;;IAED,YAAY,CAAC,IAAY;QACvB,qBAAI,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACxC,IAAI,CAAC,EAAE;YACL,OAAO,CAAC,CAAC;SACV;QACD,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE;YAC/D,CAAC,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;YACtB,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;YACnC,OAAO,CAAC,CAAC;SACV;QACD,uBAAM,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,cAAc,IAAI,SAAS,CAAC;QACtD,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE;aACd,IAAI,CAAC;YACJ,OAAO,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SAC7B,CAAC,CAAC;QACL,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QACnC,OAAO,CAAC,CAAC;KACV;;;YAhDF,UAAU,SAAC;gBACV,UAAU,EAAE,MAAM;aACnB;;;;yCAMI,MAAM,SAAC,oBAAoB;;;;;;;;ACfhC;;;;;IAcE,YACU,cACA;QADA,iBAAY,GAAZ,YAAY;QACZ,kBAAa,GAAb,aAAa;KAClB;;;;IANL,IAAI,KAAK;QACP,OAAO,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;KACjC;;;;IAMD,MAAM;QACJ,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,OAAO,IAAI,CAAC,cAAc,CAAC;SAC5B;QACD,uBAAM,QAAQ,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,EAAE,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC,CAAC;QAChF,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC;aACxC,IAAI,CAAC,CAAC,OAAO;YACZ,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;YACxB,QAAQ,IAAI,CAAC,KAAK,EAAE;SACrB,CAAC,CAAC;QACL,OAAO,IAAI,CAAC,cAAc,CAAC;KAC5B;;;;;IAED,YAAY,CAAC,IAAY;QACvB,OAAO,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;KAC9C;;;;;IAED,SAAS,CAAC,IAAY;QACpB,OAAO,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;KAC1C;;;;;;IAED,SAAS,CAAC,IAAY,EAAE,IAAY;QAClC,OAAO,IAAI,CAAC,MAAM,EAAE;aACjB,IAAI,CAAC;YACJ,OAAO,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;SAChC,CAAC;aACD,IAAI,CAAC;YACJ,uBAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,KAAK,CAAC;YACxD,OAAO,EAAE,CAAC;SACX,CAAC,CAAC;KACN;;;YA9CF,UAAU,SAAC;gBACV,UAAU,EAAE,MAAM;aACnB;;;;YAJQ,0BAA0B;YAC1B,2BAA2B;;;;;;;;ACFpC;;;;;IAuBE,YACU,SACA;QADA,YAAO,GAAP,OAAO;QACP,SAAI,GAAJ,IAAI;+BARI,EAAE;qBACJ,IAAI;yBAGA,KAAK;KAKpB;;;;IAEL,QAAQ;QACN,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;KACvB;;;;;IAED,WAAW,CAAC,OAAsB;QAChC,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,IAAI,CAAC,QAAQ,EAAE,CAAC;SACjB;KACF;;;;IAGD,SAAS;QACP,IAAI,CAAE,IAAI,CAAC,GAAG,EAAE;YACd,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;SACzC;QACD,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM;YACjC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,EAAC,YAAY,EAAE,MAAM,EAAC,CAAC,CAAC,SAAS,CACvD,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,KAAK,MAAM,CAAC,GAAG,CAAC,CAC9C,CAAC;SACH,CAAC,CAAC;KAEJ;;;;IAED,QAAQ;QACN,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,SAAS,EAAE;aACb,IAAI,CAAC,CAAC,IAAY;YACjB,OAAO,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAChD,CAAC;aACD,IAAI,CAAC,CAAC,EAAE;YACP,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;YAC1B,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;SAC7B,CAAC;aACD,KAAK,CAAC,CAAC;YACN,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC;YAC1B,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;SAC7B,CAAC,CAAC;KACN;;;YA/DF,SAAS,SAAC;gBACT,QAAQ,EAAE,kBAAkB;gBAC5B,QAAQ,EAAE,gBAAgB;gBAC1B,QAAQ,EAAE;;kDAEsC;aACjD;;;;YATQ,qBAAqB;YACrB,UAAU;;;mBAWhB,KAAK;kBACL,KAAK;mBACL,KAAK;;;;;;;ACfR;;;;IAuBE,OAAO,OAAO;QACZ,OAAO;YACL,QAAQ,EAAE,oBAAoB;YAC9B,SAAS,EAAE;gBACT,0BAA0B;gBAC1B,2BAA2B;gBAC3B,qBAAqB;gBACrB,EAAC,OAAO,EAAE,oBAAoB,EAAE,QAAQ,EAAE,sDAAsD,EAAC;gBACjG,EAAC,OAAO,EAAE,8BAA8B,EAAE,QAAQ,EAAE,SAAS,EAAC;aAC/D;SACF,CAAC;KACH;;;YApBF,QAAQ,SAAC;gBACR,OAAO,EAAE;oBACP,YAAY;oBACZ,gBAAgB;iBACjB;gBACD,YAAY,EAAE,CAAC,uBAAuB,CAAC;gBACvC,OAAO,EAAE,CAAC,uBAAuB,CAAC;aACnC;;;;;;;;;;;;;;;"}
