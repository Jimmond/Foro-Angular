{"version":3,"file":"nowzoo-ngx-highlight-js.umd.js.map","sources":["ng://@nowzoo/ngx-highlight-js/lib/ngx-highlight-js-options.ts","ng://@nowzoo/ngx-highlight-js/lib/ngx-highlight-js-theme.service.ts","ng://@nowzoo/ngx-highlight-js/lib/ngx-highlight-js-script.service.ts","ng://@nowzoo/ngx-highlight-js/lib/ngx-highlight-js.service.ts","ng://@nowzoo/ngx-highlight-js/lib/ngx-highlight-js.component.ts","ng://@nowzoo/ngx-highlight-js/lib/ngx-highlight-js.module.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\nexport const NGX_HIGHLIGHT_JS_URL = new InjectionToken<string>('The base url for highlight.js');\nexport const NGX_HIGHLIGHT_JS_DEFAULT_THEME = new InjectionToken<string>('The default theme for highlight.js');\n","import { Injectable, Inject } from '@angular/core';\nimport { Sheetload } from '@nowzoo/sheetload';\nimport {\n  NGX_HIGHLIGHT_JS_DEFAULT_THEME,\n  NGX_HIGHLIGHT_JS_URL\n} from './ngx-highlight-js-options';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxHighlightJsThemeService {\n  _theme = 'default';\n  _initializedPromise: Promise<void> = null;\n  _linkEl: HTMLLinkElement = null;\n  constructor(\n    @Inject(NGX_HIGHLIGHT_JS_DEFAULT_THEME) private _defaultTheme: string,\n    @Inject(NGX_HIGHLIGHT_JS_URL) private _jsURL: string\n  ) {\n    this._theme = _defaultTheme;\n  }\n\n  initialized(): Promise<void> {\n    if (! this._initializedPromise) {\n      this._initializedPromise = this.loadTheme(this._theme);\n    }\n    return this._initializedPromise;\n  }\n\n  loadTheme(name: string): Promise<void> {\n    const url = `${this._jsURL}/styles/${name}.min.css`;\n    return Sheetload.load(url)\n      .then((linkEl: HTMLLinkElement) => {\n        if (this._linkEl) {\n          this._linkEl.remove();\n        }\n        this._linkEl = linkEl;\n        this._linkEl.removeAttribute('disabled');\n      });\n  }\n\n  get theme(): string {\n    return this._theme;\n  }\n\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { Scriptload } from '@nowzoo/sheetload';\n\nimport {\n  NGX_HIGHLIGHT_JS_URL\n} from './ngx-highlight-js-options';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxHighlightJsScriptService {\n  _loadedLanguages: Map<string, Promise<any>>;\n  _hljs: any = null;\n  _loadedPromise: Promise<any>;\n  constructor(\n    @Inject(NGX_HIGHLIGHT_JS_URL) private _jsURL: string\n  ) {\n    this._loadedLanguages = new Map();\n  }\n\n  loaded(): Promise<any> {\n    if (this._loadedPromise) {\n      return this._loadedPromise;\n    }\n    this._loadedPromise = new Promise((resolve, reject) => {\n      const url = `${this._jsURL}/highlight.min.js`;\n      Scriptload.load(url)\n        .then(() => {\n          setTimeout(() => {\n            this._hljs = window['hljs'];\n            resolve(this._hljs);\n          }, 10);\n        })\n        .catch(reject);\n    });\n    return this._loadedPromise;\n  }\n\n  loadLanguage(lang: string): Promise<void> {\n    let p = this._loadedLanguages.get(lang);\n    if (p) {\n      return p;\n    }\n    if (this._hljs && this._hljs.listLanguages().indexOf(lang) > -1) {\n      p = Promise.resolve();\n      this._loadedLanguages.set(lang, p);\n      return p;\n    }\n    const url = `${this._jsURL}/languages/${lang}.min.js`;\n    p = this.loaded()\n      .then(() => {\n        return Scriptload.load(url);\n      });\n    this._loadedLanguages.set(lang, p);\n    return p;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { NgxHighlightJsThemeService } from './ngx-highlight-js-theme.service';\nimport { NgxHighlightJsScriptService } from './ngx-highlight-js-script.service';\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxHighlightJsService {\n  private _hljs: any;\n  private _loadedPromise: Promise<any>;\n\n\n  get theme(): string {\n    return this.themeService._theme;\n  }\n  constructor(\n    private themeService: NgxHighlightJsThemeService,\n    private scriptService: NgxHighlightJsScriptService\n  ) { }\n\n  loaded(): Promise<any> {\n    if (this._loadedPromise) {\n      return this._loadedPromise;\n    }\n    const promises = [this.scriptService.loaded(), this.themeService.initialized()];\n    this._loadedPromise = Promise.all(promises)\n      .then((results) => {\n        this._hljs = results[0];\n        return (this._hljs);\n      });\n    return this._loadedPromise;\n  }\n\n  loadLanguage(lang: string): Promise<void> {\n    return this.scriptService.loadLanguage(lang);\n  }\n\n  loadTheme(name: string): Promise<void> {\n    return this.themeService.loadTheme(name);\n  }\n\n  highlight(lang: string, code: string): Promise<string> {\n    return this.loaded()\n      .then(() => {\n        return this.loadLanguage(lang);\n      })\n      .then(() => {\n        const hl = this._hljs.highlight(lang, code, true).value;\n        return hl;\n      });\n  }\n\n}\n","import { Component, OnInit, OnChanges, Input, SimpleChanges } from '@angular/core';\nimport { NgxHighlightJsService } from './ngx-highlight-js.service';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'ngx-highlight-js',\n  exportAs: `ngxHighlightJs`,\n  template: `<pre><code\n      [ngClass]=\"'hljs ' + lang\"\n      [innerHTML]=\"highlightedHTML\"></code></pre>`,\n})\nexport class NgxHighlightJsComponent implements OnInit, OnChanges {\n\n  @Input() code: string;\n  @Input() url: string;\n  @Input() lang: string;\n\n  highlightedHTML = '';\n  error: string = null;\n  isInitializing: boolean;\n\n  private afterInit = false;\n\n  constructor(\n    private service: NgxHighlightJsService,\n    private http: HttpClient,\n  ) { }\n\n  ngOnInit() {\n    this.onChange();\n    this.afterInit = true;\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (this.afterInit) {\n      this.onChange();\n    }\n  }\n\n\n  fetchText(): Promise<string> {\n    if (! this.url) {\n      return Promise.resolve(this.code || '');\n    }\n    return new Promise((resolve, reject) => {\n      this.http.get(this.url, {responseType: 'text'}).subscribe(\n        (text) => resolve(text), (err) => reject(err)\n      );\n    });\n\n  }\n\n  onChange() {\n    this.error = null;\n    this.isInitializing = true;\n    this.fetchText()\n      .then((text: string) => {\n        return this.service.highlight(this.lang, text);\n      })\n      .then((hl) => {\n        this.highlightedHTML = hl;\n        this.isInitializing = false;\n      })\n      .catch(e => {\n        this.error = e.toString();\n        this.isInitializing = false;\n      });\n  }\n}\n","import { NgModule, ModuleWithProviders, InjectionToken } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgxHighlightJsThemeService } from './ngx-highlight-js-theme.service';\nimport { NgxHighlightJsScriptService } from './ngx-highlight-js-script.service';\nimport { NgxHighlightJsService } from './ngx-highlight-js.service';\nimport {\n  NGX_HIGHLIGHT_JS_DEFAULT_THEME,\n  NGX_HIGHLIGHT_JS_URL\n} from './ngx-highlight-js-options';\nimport { NgxHighlightJsComponent } from './ngx-highlight-js.component';\n\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule\n  ],\n  declarations: [NgxHighlightJsComponent],\n  exports: [NgxHighlightJsComponent],\n})\nexport class NgxHighlightJsModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: NgxHighlightJsModule,\n      providers: [\n        NgxHighlightJsThemeService,\n        NgxHighlightJsScriptService,\n        NgxHighlightJsService,\n        {provide: NGX_HIGHLIGHT_JS_URL, useValue: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0'},\n        {provide: NGX_HIGHLIGHT_JS_DEFAULT_THEME, useValue: 'default'},\n      ]\n    };\n  }\n}\n"],"names":["InjectionToken","Sheetload","Injectable","Inject","Scriptload","http","Component","HttpClient","Input","NgModule","CommonModule","HttpClientModule"],"mappings":"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"}
