(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@nowzoo/sheetload'), require('@angular/common/http'), require('@angular/common')) :
    typeof define === 'function' && define.amd ? define('@nowzoo/ngx-highlight-js', ['exports', '@angular/core', '@nowzoo/sheetload', '@angular/common/http', '@angular/common'], factory) :
    (factory((global.nowzoo = global.nowzoo || {}, global.nowzoo['ngx-highlight-js'] = {}),global.ng.core,null,global.ng.common.http,global.ng.common));
}(this, (function (exports,i0,sheetload,http,common) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var /** @type {?} */ NGX_HIGHLIGHT_JS_URL = new i0.InjectionToken('The base url for highlight.js');
    var /** @type {?} */ NGX_HIGHLIGHT_JS_DEFAULT_THEME = new i0.InjectionToken('The default theme for highlight.js');

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NgxHighlightJsThemeService = (function () {
        function NgxHighlightJsThemeService(_defaultTheme, _jsURL) {
            this._defaultTheme = _defaultTheme;
            this._jsURL = _jsURL;
            this._theme = 'default';
            this._initializedPromise = null;
            this._linkEl = null;
            this._theme = _defaultTheme;
        }
        /**
         * @return {?}
         */
        NgxHighlightJsThemeService.prototype.initialized = /**
         * @return {?}
         */
            function () {
                if (!this._initializedPromise) {
                    this._initializedPromise = this.loadTheme(this._theme);
                }
                return this._initializedPromise;
            };
        /**
         * @param {?} name
         * @return {?}
         */
        NgxHighlightJsThemeService.prototype.loadTheme = /**
         * @param {?} name
         * @return {?}
         */
            function (name) {
                var _this = this;
                var /** @type {?} */ url = this._jsURL + "/styles/" + name + ".min.css";
                return sheetload.Sheetload.load(url)
                    .then(function (linkEl) {
                    if (_this._linkEl) {
                        _this._linkEl.remove();
                    }
                    _this._linkEl = linkEl;
                    _this._linkEl.removeAttribute('disabled');
                });
            };
        Object.defineProperty(NgxHighlightJsThemeService.prototype, "theme", {
            get: /**
             * @return {?}
             */ function () {
                return this._theme;
            },
            enumerable: true,
            configurable: true
        });
        NgxHighlightJsThemeService.decorators = [
            { type: i0.Injectable, args: [{
                        providedIn: 'root'
                    },] },
        ];
        /** @nocollapse */
        NgxHighlightJsThemeService.ctorParameters = function () {
            return [
                { type: String, decorators: [{ type: i0.Inject, args: [NGX_HIGHLIGHT_JS_DEFAULT_THEME,] }] },
                { type: String, decorators: [{ type: i0.Inject, args: [NGX_HIGHLIGHT_JS_URL,] }] }
            ];
        };
        /** @nocollapse */ NgxHighlightJsThemeService.ngInjectableDef = i0.defineInjectable({ factory: function NgxHighlightJsThemeService_Factory() { return new NgxHighlightJsThemeService(i0.inject(NGX_HIGHLIGHT_JS_DEFAULT_THEME), i0.inject(NGX_HIGHLIGHT_JS_URL)); }, token: NgxHighlightJsThemeService, providedIn: "root" });
        return NgxHighlightJsThemeService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NgxHighlightJsScriptService = (function () {
        function NgxHighlightJsScriptService(_jsURL) {
            this._jsURL = _jsURL;
            this._hljs = null;
            this._loadedLanguages = new Map();
        }
        /**
         * @return {?}
         */
        NgxHighlightJsScriptService.prototype.loaded = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this._loadedPromise) {
                    return this._loadedPromise;
                }
                this._loadedPromise = new Promise(function (resolve, reject) {
                    var /** @type {?} */ url = _this._jsURL + "/highlight.min.js";
                    sheetload.Scriptload.load(url)
                        .then(function () {
                        setTimeout(function () {
                            _this._hljs = window['hljs'];
                            resolve(_this._hljs);
                        }, 10);
                    })
                        .catch(reject);
                });
                return this._loadedPromise;
            };
        /**
         * @param {?} lang
         * @return {?}
         */
        NgxHighlightJsScriptService.prototype.loadLanguage = /**
         * @param {?} lang
         * @return {?}
         */
            function (lang) {
                var /** @type {?} */ p = this._loadedLanguages.get(lang);
                if (p) {
                    return p;
                }
                if (this._hljs && this._hljs.listLanguages().indexOf(lang) > -1) {
                    p = Promise.resolve();
                    this._loadedLanguages.set(lang, p);
                    return p;
                }
                var /** @type {?} */ url = this._jsURL + "/languages/" + lang + ".min.js";
                p = this.loaded()
                    .then(function () {
                    return sheetload.Scriptload.load(url);
                });
                this._loadedLanguages.set(lang, p);
                return p;
            };
        NgxHighlightJsScriptService.decorators = [
            { type: i0.Injectable, args: [{
                        providedIn: 'root'
                    },] },
        ];
        /** @nocollapse */
        NgxHighlightJsScriptService.ctorParameters = function () {
            return [
                { type: String, decorators: [{ type: i0.Inject, args: [NGX_HIGHLIGHT_JS_URL,] }] }
            ];
        };
        /** @nocollapse */ NgxHighlightJsScriptService.ngInjectableDef = i0.defineInjectable({ factory: function NgxHighlightJsScriptService_Factory() { return new NgxHighlightJsScriptService(i0.inject(NGX_HIGHLIGHT_JS_URL)); }, token: NgxHighlightJsScriptService, providedIn: "root" });
        return NgxHighlightJsScriptService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NgxHighlightJsService = (function () {
        function NgxHighlightJsService(themeService, scriptService) {
            this.themeService = themeService;
            this.scriptService = scriptService;
        }
        Object.defineProperty(NgxHighlightJsService.prototype, "theme", {
            get: /**
             * @return {?}
             */ function () {
                return this.themeService._theme;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        NgxHighlightJsService.prototype.loaded = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this._loadedPromise) {
                    return this._loadedPromise;
                }
                var /** @type {?} */ promises = [this.scriptService.loaded(), this.themeService.initialized()];
                this._loadedPromise = Promise.all(promises)
                    .then(function (results) {
                    _this._hljs = results[0];
                    return (_this._hljs);
                });
                return this._loadedPromise;
            };
        /**
         * @param {?} lang
         * @return {?}
         */
        NgxHighlightJsService.prototype.loadLanguage = /**
         * @param {?} lang
         * @return {?}
         */
            function (lang) {
                return this.scriptService.loadLanguage(lang);
            };
        /**
         * @param {?} name
         * @return {?}
         */
        NgxHighlightJsService.prototype.loadTheme = /**
         * @param {?} name
         * @return {?}
         */
            function (name) {
                return this.themeService.loadTheme(name);
            };
        /**
         * @param {?} lang
         * @param {?} code
         * @return {?}
         */
        NgxHighlightJsService.prototype.highlight = /**
         * @param {?} lang
         * @param {?} code
         * @return {?}
         */
            function (lang, code) {
                var _this = this;
                return this.loaded()
                    .then(function () {
                    return _this.loadLanguage(lang);
                })
                    .then(function () {
                    var /** @type {?} */ hl = _this._hljs.highlight(lang, code, true).value;
                    return hl;
                });
            };
        NgxHighlightJsService.decorators = [
            { type: i0.Injectable, args: [{
                        providedIn: 'root'
                    },] },
        ];
        /** @nocollapse */
        NgxHighlightJsService.ctorParameters = function () {
            return [
                { type: NgxHighlightJsThemeService },
                { type: NgxHighlightJsScriptService }
            ];
        };
        /** @nocollapse */ NgxHighlightJsService.ngInjectableDef = i0.defineInjectable({ factory: function NgxHighlightJsService_Factory() { return new NgxHighlightJsService(i0.inject(NgxHighlightJsThemeService), i0.inject(NgxHighlightJsScriptService)); }, token: NgxHighlightJsService, providedIn: "root" });
        return NgxHighlightJsService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NgxHighlightJsComponent = (function () {
        function NgxHighlightJsComponent(service, http$$1) {
            this.service = service;
            this.http = http$$1;
            this.highlightedHTML = '';
            this.error = null;
            this.afterInit = false;
        }
        /**
         * @return {?}
         */
        NgxHighlightJsComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                this.onChange();
                this.afterInit = true;
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        NgxHighlightJsComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                if (this.afterInit) {
                    this.onChange();
                }
            };
        /**
         * @return {?}
         */
        NgxHighlightJsComponent.prototype.fetchText = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (!this.url) {
                    return Promise.resolve(this.code || '');
                }
                return new Promise(function (resolve, reject) {
                    _this.http.get(_this.url, { responseType: 'text' }).subscribe(function (text) { return resolve(text); }, function (err) { return reject(err); });
                });
            };
        /**
         * @return {?}
         */
        NgxHighlightJsComponent.prototype.onChange = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.error = null;
                this.isInitializing = true;
                this.fetchText()
                    .then(function (text) {
                    return _this.service.highlight(_this.lang, text);
                })
                    .then(function (hl) {
                    _this.highlightedHTML = hl;
                    _this.isInitializing = false;
                })
                    .catch(function (e) {
                    _this.error = e.toString();
                    _this.isInitializing = false;
                });
            };
        NgxHighlightJsComponent.decorators = [
            { type: i0.Component, args: [{
                        selector: 'ngx-highlight-js',
                        exportAs: "ngxHighlightJs",
                        template: "<pre><code\n      [ngClass]=\"'hljs ' + lang\"\n      [innerHTML]=\"highlightedHTML\"></code></pre>",
                    },] },
        ];
        /** @nocollapse */
        NgxHighlightJsComponent.ctorParameters = function () {
            return [
                { type: NgxHighlightJsService },
                { type: http.HttpClient }
            ];
        };
        NgxHighlightJsComponent.propDecorators = {
            code: [{ type: i0.Input }],
            url: [{ type: i0.Input }],
            lang: [{ type: i0.Input }]
        };
        return NgxHighlightJsComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NgxHighlightJsModule = (function () {
        function NgxHighlightJsModule() {
        }
        /**
         * @return {?}
         */
        NgxHighlightJsModule.forRoot = /**
         * @return {?}
         */
            function () {
                return {
                    ngModule: NgxHighlightJsModule,
                    providers: [
                        NgxHighlightJsThemeService,
                        NgxHighlightJsScriptService,
                        NgxHighlightJsService,
                        { provide: NGX_HIGHLIGHT_JS_URL, useValue: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0' },
                        { provide: NGX_HIGHLIGHT_JS_DEFAULT_THEME, useValue: 'default' },
                    ]
                };
            };
        NgxHighlightJsModule.decorators = [
            { type: i0.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            http.HttpClientModule
                        ],
                        declarations: [NgxHighlightJsComponent],
                        exports: [NgxHighlightJsComponent],
                    },] },
        ];
        return NgxHighlightJsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    exports.NGX_HIGHLIGHT_JS_URL = NGX_HIGHLIGHT_JS_URL;
    exports.NGX_HIGHLIGHT_JS_DEFAULT_THEME = NGX_HIGHLIGHT_JS_DEFAULT_THEME;
    exports.NgxHighlightJsService = NgxHighlightJsService;
    exports.NgxHighlightJsModule = NgxHighlightJsModule;
    exports.ɵb = NgxHighlightJsScriptService;
    exports.ɵa = NgxHighlightJsThemeService;
    exports.ɵc = NgxHighlightJsComponent;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm93em9vLW5neC1oaWdobGlnaHQtanMudW1kLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9Abm93em9vL25neC1oaWdobGlnaHQtanMvbGliL25neC1oaWdobGlnaHQtanMtb3B0aW9ucy50cyIsIm5nOi8vQG5vd3pvby9uZ3gtaGlnaGxpZ2h0LWpzL2xpYi9uZ3gtaGlnaGxpZ2h0LWpzLXRoZW1lLnNlcnZpY2UudHMiLCJuZzovL0Bub3d6b28vbmd4LWhpZ2hsaWdodC1qcy9saWIvbmd4LWhpZ2hsaWdodC1qcy1zY3JpcHQuc2VydmljZS50cyIsIm5nOi8vQG5vd3pvby9uZ3gtaGlnaGxpZ2h0LWpzL2xpYi9uZ3gtaGlnaGxpZ2h0LWpzLnNlcnZpY2UudHMiLCJuZzovL0Bub3d6b28vbmd4LWhpZ2hsaWdodC1qcy9saWIvbmd4LWhpZ2hsaWdodC1qcy5jb21wb25lbnQudHMiLCJuZzovL0Bub3d6b28vbmd4LWhpZ2hsaWdodC1qcy9saWIvbmd4LWhpZ2hsaWdodC1qcy5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0aW9uVG9rZW4gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmV4cG9ydCBjb25zdCBOR1hfSElHSExJR0hUX0pTX1VSTCA9IG5ldyBJbmplY3Rpb25Ub2tlbjxzdHJpbmc+KCdUaGUgYmFzZSB1cmwgZm9yIGhpZ2hsaWdodC5qcycpO1xuZXhwb3J0IGNvbnN0IE5HWF9ISUdITElHSFRfSlNfREVGQVVMVF9USEVNRSA9IG5ldyBJbmplY3Rpb25Ub2tlbjxzdHJpbmc+KCdUaGUgZGVmYXVsdCB0aGVtZSBmb3IgaGlnaGxpZ2h0LmpzJyk7XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFNoZWV0bG9hZCB9IGZyb20gJ0Bub3d6b28vc2hlZXRsb2FkJztcbmltcG9ydCB7XG4gIE5HWF9ISUdITElHSFRfSlNfREVGQVVMVF9USEVNRSxcbiAgTkdYX0hJR0hMSUdIVF9KU19VUkxcbn0gZnJvbSAnLi9uZ3gtaGlnaGxpZ2h0LWpzLW9wdGlvbnMnO1xuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBOZ3hIaWdobGlnaHRKc1RoZW1lU2VydmljZSB7XG4gIF90aGVtZSA9ICdkZWZhdWx0JztcbiAgX2luaXRpYWxpemVkUHJvbWlzZTogUHJvbWlzZTx2b2lkPiA9IG51bGw7XG4gIF9saW5rRWw6IEhUTUxMaW5rRWxlbWVudCA9IG51bGw7XG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJbmplY3QoTkdYX0hJR0hMSUdIVF9KU19ERUZBVUxUX1RIRU1FKSBwcml2YXRlIF9kZWZhdWx0VGhlbWU6IHN0cmluZyxcbiAgICBASW5qZWN0KE5HWF9ISUdITElHSFRfSlNfVVJMKSBwcml2YXRlIF9qc1VSTDogc3RyaW5nXG4gICkge1xuICAgIHRoaXMuX3RoZW1lID0gX2RlZmF1bHRUaGVtZTtcbiAgfVxuXG4gIGluaXRpYWxpemVkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghIHRoaXMuX2luaXRpYWxpemVkUHJvbWlzZSkge1xuICAgICAgdGhpcy5faW5pdGlhbGl6ZWRQcm9taXNlID0gdGhpcy5sb2FkVGhlbWUodGhpcy5fdGhlbWUpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faW5pdGlhbGl6ZWRQcm9taXNlO1xuICB9XG5cbiAgbG9hZFRoZW1lKG5hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMuX2pzVVJMfS9zdHlsZXMvJHtuYW1lfS5taW4uY3NzYDtcbiAgICByZXR1cm4gU2hlZXRsb2FkLmxvYWQodXJsKVxuICAgICAgLnRoZW4oKGxpbmtFbDogSFRNTExpbmtFbGVtZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLl9saW5rRWwpIHtcbiAgICAgICAgICB0aGlzLl9saW5rRWwucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbGlua0VsID0gbGlua0VsO1xuICAgICAgICB0aGlzLl9saW5rRWwucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgfSk7XG4gIH1cblxuICBnZXQgdGhlbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fdGhlbWU7XG4gIH1cblxufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSwgSW5qZWN0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTY3JpcHRsb2FkIH0gZnJvbSAnQG5vd3pvby9zaGVldGxvYWQnO1xuXG5pbXBvcnQge1xuICBOR1hfSElHSExJR0hUX0pTX1VSTFxufSBmcm9tICcuL25neC1oaWdobGlnaHQtanMtb3B0aW9ucyc7XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIE5neEhpZ2hsaWdodEpzU2NyaXB0U2VydmljZSB7XG4gIF9sb2FkZWRMYW5ndWFnZXM6IE1hcDxzdHJpbmcsIFByb21pc2U8YW55Pj47XG4gIF9obGpzOiBhbnkgPSBudWxsO1xuICBfbG9hZGVkUHJvbWlzZTogUHJvbWlzZTxhbnk+O1xuICBjb25zdHJ1Y3RvcihcbiAgICBASW5qZWN0KE5HWF9ISUdITElHSFRfSlNfVVJMKSBwcml2YXRlIF9qc1VSTDogc3RyaW5nXG4gICkge1xuICAgIHRoaXMuX2xvYWRlZExhbmd1YWdlcyA9IG5ldyBNYXAoKTtcbiAgfVxuXG4gIGxvYWRlZCgpOiBQcm9taXNlPGFueT4ge1xuICAgIGlmICh0aGlzLl9sb2FkZWRQcm9taXNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbG9hZGVkUHJvbWlzZTtcbiAgICB9XG4gICAgdGhpcy5fbG9hZGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMuX2pzVVJMfS9oaWdobGlnaHQubWluLmpzYDtcbiAgICAgIFNjcmlwdGxvYWQubG9hZCh1cmwpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hsanMgPSB3aW5kb3dbJ2hsanMnXTtcbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5faGxqcyk7XG4gICAgICAgICAgfSwgMTApO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2gocmVqZWN0KTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fbG9hZGVkUHJvbWlzZTtcbiAgfVxuXG4gIGxvYWRMYW5ndWFnZShsYW5nOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBsZXQgcCA9IHRoaXMuX2xvYWRlZExhbmd1YWdlcy5nZXQobGFuZyk7XG4gICAgaWYgKHApIHtcbiAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgICBpZiAodGhpcy5faGxqcyAmJiB0aGlzLl9obGpzLmxpc3RMYW5ndWFnZXMoKS5pbmRleE9mKGxhbmcpID4gLTEpIHtcbiAgICAgIHAgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIHRoaXMuX2xvYWRlZExhbmd1YWdlcy5zZXQobGFuZywgcCk7XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5fanNVUkx9L2xhbmd1YWdlcy8ke2xhbmd9Lm1pbi5qc2A7XG4gICAgcCA9IHRoaXMubG9hZGVkKClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIFNjcmlwdGxvYWQubG9hZCh1cmwpO1xuICAgICAgfSk7XG4gICAgdGhpcy5fbG9hZGVkTGFuZ3VhZ2VzLnNldChsYW5nLCBwKTtcbiAgICByZXR1cm4gcDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTmd4SGlnaGxpZ2h0SnNUaGVtZVNlcnZpY2UgfSBmcm9tICcuL25neC1oaWdobGlnaHQtanMtdGhlbWUuc2VydmljZSc7XG5pbXBvcnQgeyBOZ3hIaWdobGlnaHRKc1NjcmlwdFNlcnZpY2UgfSBmcm9tICcuL25neC1oaWdobGlnaHQtanMtc2NyaXB0LnNlcnZpY2UnO1xuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgTmd4SGlnaGxpZ2h0SnNTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBfaGxqczogYW55O1xuICBwcml2YXRlIF9sb2FkZWRQcm9taXNlOiBQcm9taXNlPGFueT47XG5cblxuICBnZXQgdGhlbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy50aGVtZVNlcnZpY2UuX3RoZW1lO1xuICB9XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgdGhlbWVTZXJ2aWNlOiBOZ3hIaWdobGlnaHRKc1RoZW1lU2VydmljZSxcbiAgICBwcml2YXRlIHNjcmlwdFNlcnZpY2U6IE5neEhpZ2hsaWdodEpzU2NyaXB0U2VydmljZVxuICApIHsgfVxuXG4gIGxvYWRlZCgpOiBQcm9taXNlPGFueT4ge1xuICAgIGlmICh0aGlzLl9sb2FkZWRQcm9taXNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbG9hZGVkUHJvbWlzZTtcbiAgICB9XG4gICAgY29uc3QgcHJvbWlzZXMgPSBbdGhpcy5zY3JpcHRTZXJ2aWNlLmxvYWRlZCgpLCB0aGlzLnRoZW1lU2VydmljZS5pbml0aWFsaXplZCgpXTtcbiAgICB0aGlzLl9sb2FkZWRQcm9taXNlID0gUHJvbWlzZS5hbGwocHJvbWlzZXMpXG4gICAgICAudGhlbigocmVzdWx0cykgPT4ge1xuICAgICAgICB0aGlzLl9obGpzID0gcmVzdWx0c1swXTtcbiAgICAgICAgcmV0dXJuICh0aGlzLl9obGpzKTtcbiAgICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9sb2FkZWRQcm9taXNlO1xuICB9XG5cbiAgbG9hZExhbmd1YWdlKGxhbmc6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnNjcmlwdFNlcnZpY2UubG9hZExhbmd1YWdlKGxhbmcpO1xuICB9XG5cbiAgbG9hZFRoZW1lKG5hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnRoZW1lU2VydmljZS5sb2FkVGhlbWUobmFtZSk7XG4gIH1cblxuICBoaWdobGlnaHQobGFuZzogc3RyaW5nLCBjb2RlOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiB0aGlzLmxvYWRlZCgpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRMYW5ndWFnZShsYW5nKTtcbiAgICAgIH0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGhsID0gdGhpcy5faGxqcy5oaWdobGlnaHQobGFuZywgY29kZSwgdHJ1ZSkudmFsdWU7XG4gICAgICAgIHJldHVybiBobDtcbiAgICAgIH0pO1xuICB9XG5cbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBPbkNoYW5nZXMsIElucHV0LCBTaW1wbGVDaGFuZ2VzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBOZ3hIaWdobGlnaHRKc1NlcnZpY2UgfSBmcm9tICcuL25neC1oaWdobGlnaHQtanMuc2VydmljZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduZ3gtaGlnaGxpZ2h0LWpzJyxcbiAgZXhwb3J0QXM6IGBuZ3hIaWdobGlnaHRKc2AsXG4gIHRlbXBsYXRlOiBgPHByZT48Y29kZVxuICAgICAgW25nQ2xhc3NdPVwiJ2hsanMgJyArIGxhbmdcIlxuICAgICAgW2lubmVySFRNTF09XCJoaWdobGlnaHRlZEhUTUxcIj48L2NvZGU+PC9wcmU+YCxcbn0pXG5leHBvcnQgY2xhc3MgTmd4SGlnaGxpZ2h0SnNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XG5cbiAgQElucHV0KCkgY29kZTogc3RyaW5nO1xuICBASW5wdXQoKSB1cmw6IHN0cmluZztcbiAgQElucHV0KCkgbGFuZzogc3RyaW5nO1xuXG4gIGhpZ2hsaWdodGVkSFRNTCA9ICcnO1xuICBlcnJvcjogc3RyaW5nID0gbnVsbDtcbiAgaXNJbml0aWFsaXppbmc6IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSBhZnRlckluaXQgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHNlcnZpY2U6IE5neEhpZ2hsaWdodEpzU2VydmljZSxcbiAgICBwcml2YXRlIGh0dHA6IEh0dHBDbGllbnQsXG4gICkgeyB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5vbkNoYW5nZSgpO1xuICAgIHRoaXMuYWZ0ZXJJbml0ID0gdHJ1ZTtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICBpZiAodGhpcy5hZnRlckluaXQpIHtcbiAgICAgIHRoaXMub25DaGFuZ2UoKTtcbiAgICB9XG4gIH1cblxuXG4gIGZldGNoVGV4dCgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGlmICghIHRoaXMudXJsKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuY29kZSB8fCAnJyk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLmh0dHAuZ2V0KHRoaXMudXJsLCB7cmVzcG9uc2VUeXBlOiAndGV4dCd9KS5zdWJzY3JpYmUoXG4gICAgICAgICh0ZXh0KSA9PiByZXNvbHZlKHRleHQpLCAoZXJyKSA9PiByZWplY3QoZXJyKVxuICAgICAgKTtcbiAgICB9KTtcblxuICB9XG5cbiAgb25DaGFuZ2UoKSB7XG4gICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgdGhpcy5pc0luaXRpYWxpemluZyA9IHRydWU7XG4gICAgdGhpcy5mZXRjaFRleHQoKVxuICAgICAgLnRoZW4oKHRleHQ6IHN0cmluZykgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLmhpZ2hsaWdodCh0aGlzLmxhbmcsIHRleHQpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKChobCkgPT4ge1xuICAgICAgICB0aGlzLmhpZ2hsaWdodGVkSFRNTCA9IGhsO1xuICAgICAgICB0aGlzLmlzSW5pdGlhbGl6aW5nID0gZmFsc2U7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGUgPT4ge1xuICAgICAgICB0aGlzLmVycm9yID0gZS50b1N0cmluZygpO1xuICAgICAgICB0aGlzLmlzSW5pdGlhbGl6aW5nID0gZmFsc2U7XG4gICAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUsIE1vZHVsZVdpdGhQcm92aWRlcnMsIEluamVjdGlvblRva2VuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgSHR0cENsaWVudE1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IE5neEhpZ2hsaWdodEpzVGhlbWVTZXJ2aWNlIH0gZnJvbSAnLi9uZ3gtaGlnaGxpZ2h0LWpzLXRoZW1lLnNlcnZpY2UnO1xuaW1wb3J0IHsgTmd4SGlnaGxpZ2h0SnNTY3JpcHRTZXJ2aWNlIH0gZnJvbSAnLi9uZ3gtaGlnaGxpZ2h0LWpzLXNjcmlwdC5zZXJ2aWNlJztcbmltcG9ydCB7IE5neEhpZ2hsaWdodEpzU2VydmljZSB9IGZyb20gJy4vbmd4LWhpZ2hsaWdodC1qcy5zZXJ2aWNlJztcbmltcG9ydCB7XG4gIE5HWF9ISUdITElHSFRfSlNfREVGQVVMVF9USEVNRSxcbiAgTkdYX0hJR0hMSUdIVF9KU19VUkxcbn0gZnJvbSAnLi9uZ3gtaGlnaGxpZ2h0LWpzLW9wdGlvbnMnO1xuaW1wb3J0IHsgTmd4SGlnaGxpZ2h0SnNDb21wb25lbnQgfSBmcm9tICcuL25neC1oaWdobGlnaHQtanMuY29tcG9uZW50JztcblxuXG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBDb21tb25Nb2R1bGUsXG4gICAgSHR0cENsaWVudE1vZHVsZVxuICBdLFxuICBkZWNsYXJhdGlvbnM6IFtOZ3hIaWdobGlnaHRKc0NvbXBvbmVudF0sXG4gIGV4cG9ydHM6IFtOZ3hIaWdobGlnaHRKc0NvbXBvbmVudF0sXG59KVxuZXhwb3J0IGNsYXNzIE5neEhpZ2hsaWdodEpzTW9kdWxlIHtcbiAgc3RhdGljIGZvclJvb3QoKTogTW9kdWxlV2l0aFByb3ZpZGVycyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5nTW9kdWxlOiBOZ3hIaWdobGlnaHRKc01vZHVsZSxcbiAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICBOZ3hIaWdobGlnaHRKc1RoZW1lU2VydmljZSxcbiAgICAgICAgTmd4SGlnaGxpZ2h0SnNTY3JpcHRTZXJ2aWNlLFxuICAgICAgICBOZ3hIaWdobGlnaHRKc1NlcnZpY2UsXG4gICAgICAgIHtwcm92aWRlOiBOR1hfSElHSExJR0hUX0pTX1VSTCwgdXNlVmFsdWU6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9oaWdobGlnaHQuanMvOS4xMi4wJ30sXG4gICAgICAgIHtwcm92aWRlOiBOR1hfSElHSExJR0hUX0pTX0RFRkFVTFRfVEhFTUUsIHVzZVZhbHVlOiAnZGVmYXVsdCd9LFxuICAgICAgXVxuICAgIH07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJJbmplY3Rpb25Ub2tlbiIsIlNoZWV0bG9hZCIsIkluamVjdGFibGUiLCJJbmplY3QiLCJTY3JpcHRsb2FkIiwiaHR0cCIsIkNvbXBvbmVudCIsIkh0dHBDbGllbnQiLCJJbnB1dCIsIk5nTW9kdWxlIiwiQ29tbW9uTW9kdWxlIiwiSHR0cENsaWVudE1vZHVsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLHlCQUNhLG9CQUFvQixHQUFHLElBQUlBLGlCQUFjLENBQVMsK0JBQStCLENBQUMsQ0FBQztBQUNoRyx5QkFBYSw4QkFBOEIsR0FBRyxJQUFJQSxpQkFBYyxDQUFTLG9DQUFvQyxDQUFDOzs7Ozs7QUNGOUc7UUFjRSxvQ0FD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